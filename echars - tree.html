<!DOCTYPE html>
<html>
  <head>
    <title>ECharts Sample</title>
    <script src="http://echarts.baidu.com/dist/echarts.min.js"></script>
    <script src="jquery-1.9.min.js"></script>
    <script src="dataTool.min.js"></script>
  </head>
  <body>
    <div id="chart" style="width: 1000px; height: 800px;"></div>
    <script>
      var chart = document.getElementById('chart');
      var myChart = echarts.init(chart);

      myChart.hideLoading();
      var categories = [];
      var data = {
        createTimeBegin: '2018-11-01',
        createTimeEnd: '2018-12-14',
        callFrom: '豆豆钱',
        moduleName: '星享贷手机申请评分-201710终审'
      };

      $.ajax({
        url: 'http://10.200.20.174:9110/rc-analyse/query/modeuleprocess/tree',
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify(data),
        type: 'post',
        success: function(data) {
          var graph = data.result;
          console.log(graph);
          echarts.util.each(graph.children, function(datum, index) {
            index % 2 === 0 && (datum.collapsed = true);
          });

          myChart.setOption(
            (option = {
              tooltip: {
                trigger: 'item',
                triggerOn: 'mousemove'
              },
              series: [
                {
                  type: 'tree',

                  data: [graph],

                  top: '1%',
                  left: '7%',
                  bottom: '1%',
                  right: '20%',

                  symbolSize: 7,

                  label: {
                    normal: {
                      position: 'left',
                      verticalAlign: 'middle',
                      align: 'right',
                      fontSize: 9
                    }
                  },

                  leaves: {
                    label: {
                      normal: {
                        position: 'right',
                        verticalAlign: 'middle',
                        align: 'left'
                      }
                    }
                  },

                  expandAndCollapse: true,
                  animationDuration: 550,
                  animationDurationUpdate: 750
                }
              ]
            })
          );
          console.log(data);
        }
      });
    </script>
  </body>
</html>
